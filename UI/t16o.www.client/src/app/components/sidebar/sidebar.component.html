<!-- Desktop Sidebar -->
<aside *ngIf="!isMobile"
       class="sidebar"
       [class.sidebar-visible]="sidebarVisible"
       [class.sidebar-pinned]="sidebarPinned"
       (mouseenter)="onSidebarMouseEnter()"
       (mouseleave)="onSidebarMouseLeave()">

  <div class="sidebar-trigger" *ngIf="!sidebarVisible && !sidebarPinned">
    <i class="pi pi-angle-right"></i>
  </div>

  <div class="sidebar-content" *ngIf="sidebarVisible">
    <div class="sidebar-header">
      <span class="sidebar-title">Menu</span>
      <button class="pin-btn"
              (click)="toggleSidebarPin()"
              [pTooltip]="sidebarPinned ? 'Unpin menu' : 'Pin menu'"
              tooltipPosition="right"
              pRipple>
        <i class="pi" [ngClass]="sidebarPinned ? 'pi-lock' : 'pi-lock-open'"></i>
      </button>
    </div>

    <nav class="sidebar-nav">
      <ng-container *ngFor="let item of menuItems">
        <!-- Menu item without children -->
        <a *ngIf="!item.children || item.children.length === 0"
           class="sidebar-item"
           [routerLink]="item.route"
           routerLinkActive="active"
           (click)="onMenuItemClick(item, $event)"
           pRipple>
          <i [class]="item.icon"></i>
          <span class="sidebar-item-label">{{ item.label }}</span>
        </a>

        <!-- Menu item with children -->
        <div *ngIf="item.children && item.children.length > 0" class="sidebar-item-group">
          <a class="sidebar-item has-children"
             [class.expanded]="item.expanded"
             (click)="onMenuItemClick(item, $event)"
             pRipple>
            <i [class]="item.icon"></i>
            <span class="sidebar-item-label">{{ item.label }}</span>
            <i class="pi expand-icon" [ngClass]="item.expanded ? 'pi-chevron-down' : 'pi-chevron-right'"></i>
          </a>
          <div class="sidebar-submenu" [class.expanded]="item.expanded">
            <a *ngFor="let child of item.children"
               class="sidebar-item sidebar-subitem"
               [routerLink]="child.route"
               routerLinkActive="active"
               (click)="onMenuItemClick(child, $event)"
               pRipple>
              <i [class]="child.icon"></i>
              <span class="sidebar-item-label">{{ child.label }}</span>
            </a>
          </div>
        </div>
      </ng-container>
    </nav>
  </div>
</aside>

<!-- Mobile Drawer -->
<p-drawer *ngIf="isMobile"
          [visible]="mobileDrawerVisible"
          (visibleChange)="onMobileDrawerHide()"
          [modal]="true"
          [showCloseIcon]="true"
          header="Menu"
          position="left"
          styleClass="mobile-drawer">
  <nav class="sidebar-nav">
    <ng-container *ngFor="let item of menuItems">
      <!-- Menu item without children -->
      <a *ngIf="!item.children || item.children.length === 0"
         class="sidebar-item"
         [routerLink]="item.route"
         routerLinkActive="active"
         (click)="onMenuItemClick(item, $event)"
         pRipple>
        <i [class]="item.icon"></i>
        <span class="sidebar-item-label">{{ item.label }}</span>
      </a>

      <!-- Menu item with children -->
      <div *ngIf="item.children && item.children.length > 0" class="sidebar-item-group">
        <a class="sidebar-item has-children"
           [class.expanded]="item.expanded"
           (click)="onMenuItemClick(item, $event)"
           pRipple>
          <i [class]="item.icon"></i>
          <span class="sidebar-item-label">{{ item.label }}</span>
          <i class="pi expand-icon" [ngClass]="item.expanded ? 'pi-chevron-down' : 'pi-chevron-right'"></i>
        </a>
        <div class="sidebar-submenu" [class.expanded]="item.expanded">
          <a *ngFor="let child of item.children"
             class="sidebar-item sidebar-subitem"
             [routerLink]="child.route"
             routerLinkActive="active"
             (click)="onMenuItemClick(child, $event)"
             pRipple>
            <i [class]="child.icon"></i>
            <span class="sidebar-item-label">{{ child.label }}</span>
          </a>
        </div>
      </div>
    </ng-container>
  </nav>
</p-drawer>
