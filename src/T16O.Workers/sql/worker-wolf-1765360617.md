# Winston Worker Assessment Report

**Generated:** 2025-12-10 09:56:57 UTC

---

## Summary

| Metric | Value |
|--------|-------|
| Unknown party records | 1,660 |
| Unknown transactions | 17 |
| Unknown percentage | 19.33% |

---

## Program Pattern Analysis

These program IDs appear in unknown transactions. Consider adding detection logic to `sp_party_merge`.

| Program ID | Count | Sample Signatures |
|------------|-------|-------------------|
| `DF1ow4tspfHX9JwWJsAb9epbkA8hmpSEAtxXy1V27QBH` | 6 | `2RyHapRu...`, `5jNAMy5b...` |
| `3q9RnxufDcorEPAmCeZumn8kveC832rYYmZSk5tcaCzM` | 2 | `26Ftfg4h...`, `3LTgYgp3...` |

---

## Instruction Pattern Analysis

These instruction types appear in unknown transactions.

| Instruction | Count | Suggested Action | Sample Signatures |
|-------------|-------|------------------|-------------------|
| `WithdrawWithheldTokensFromAccounts` | 4 | `withdraw` | `39QCe8iq...`, `483nRkqz...` |
| `WithdrawWithheldTokensFromMint` | 4 | `withdraw` | `3C6ovh9S...`, `3EkHAgdy...` |
| `WrapSol` | 4 | *(needs review)* | `2RyHapRu...`, `5jNAMy5b...` |
| `Swap2` | 2 | `swap` | `5p7EkSfB...`, `5yXdrtHw...` |
| `ExecuteLightweightThreeHop` | 1 | *(needs review)* | `3LTgYgp3...` |
| `ExecuteLightweightTwoHop` | 1 | *(needs review)* | `26Ftfg4h...` |
| `GetAccountDataSize` | 1 | *(needs review)* | `moQPeA3v...` |

---

## New ENUM Values Required

The following action types are not yet in the `party.action_type` ENUM:

- `withdraw`

Run the ALTER TABLE statement in the generated `sp_party_merge-*.sql` file first.

---

## Suggested sp_party_merge Updates

Based on the patterns above, the following detection logic can be added:

```sql
-- Add these conditions to the action type CASE statement:

-- Instruction 'WithdrawWithheldTokensFromAccounts' appears 4 times [NEW ENUM VALUE]
WHEN v_log_messages LIKE '%Instruction: WithdrawWithheldTokensFromAccounts%' THEN 'withdraw'

-- Instruction 'WithdrawWithheldTokensFromMint' appears 4 times [NEW ENUM VALUE]
WHEN v_log_messages LIKE '%Instruction: WithdrawWithheldTokensFromMint%' THEN 'withdraw'

-- Instruction 'Swap2' appears 2 times
WHEN v_log_messages LIKE '%Instruction: Swap2%' THEN 'swap'
```

---

## Instructions Needing Manual Review

These instructions could not be automatically mapped:

### `WrapSol`

- **Count:** 4
- **Sample signatures:**
  - `2RyHapRuK7E5oTh2br9znnCeCNvGn4c7WPNXNGJteBKw5NBU5RLrfy9mUHFGmY34Lc4EGsXV3qJGQqjpE8AZDGKR`
  - `5jNAMy5b6YS4n4AXDr1jDU7PjSBSSxtMMg66QgcDZJXiha47kDBLP1yGe8TAcK1UpTnr54rWA4HbZKnUCSk1cy5Z`
  - `5rjesDMwB5yKphhcmpzJYo7QeLoaFwDFg2wEVHHGMEpGYGZkFbddBGA9q7TLX1kNm3YJWyq1id7KeYg3aLPgx89y`

### `ExecuteLightweightThreeHop`

- **Count:** 1
- **Sample signatures:**
  - `3LTgYgp3YauoLyPsPwrPjMvGkZoGFvj5i3UZZbcKKZpGqf3cs686KuKYB99bNCazYHt7tPW5uoKvgkjCwVtWmt2R`

### `ExecuteLightweightTwoHop`

- **Count:** 1
- **Sample signatures:**
  - `26Ftfg4hyBojs9uwBi13KnNNLLmiiCcUC2SAi2Hb9uaXTEu2DaGo2MC3J9b9n7V1G11LsoqW9BMViecs5BXMqoVw`

### `GetAccountDataSize`

- **Count:** 1
- **Sample signatures:**
  - `moQPeA3vT1wnJNCCgcLFTEdqhTzwNwQwYc8zTkjRvXN9j7fqKJhUWxphtwQuXCTduQoyB9wnND55oBEDbXtWXNG`

---

## Next Steps

1. Review the generated `sp_party_merge-*.sql` file
2. Apply the stored procedure update if the changes look correct
3. Reprocess unknown records:

```sql
CALL sp_party_reprocess_unknown(1000);
```

