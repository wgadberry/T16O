# Winston Worker Assessment Report

**Generated:** 2025-12-10 09:22:49 UTC

---

## Summary

| Metric | Value |
|--------|-------|
| Unknown party records | 1,977 |
| Unknown transactions | 14 |
| Unknown percentage | 20.72% |

---

## Program Pattern Analysis

These program IDs appear in unknown transactions. Consider adding detection logic to `sp_party_merge`.

| Program ID | Count | Sample Signatures |
|------------|-------|-------------------|
| `DF1ow4tspfHX9JwWJsAb9epbkA8hmpSEAtxXy1V27QBH` | 4 | `51531obV...`, `5DSxc1LC...` |
| `DeJBGdMFa1uynnnKiwrVioatTuHmNLpyFKnmB5kaFdzQ` | 4 | `5fhbMQJs...`, `5nZu2vdy...` |

---

## Instruction Pattern Analysis

These instruction types appear in unknown transactions.

| Instruction | Count | Suggested Action | Sample Signatures |
|-------------|-------|------------------|-------------------|
| `GetAccountDataSize` | 4 | *(needs review)* | `5fhbMQJs...`, `5nZu2vdy...` |
| `WithdrawWithheldTokensFromAccounts` | 3 | `withdraw` | `5MUjanUA...`, `5x93wKv4...` |
| `WithdrawWithheldTokensFromMint` | 3 | `withdraw` | `4KTvTHvp...`, `5nX58mm1...` |
| `WrapSol` | 3 | *(needs review)* | `51531obV...`, `5DSxc1LC...` |
| `Swap2` | 1 | `swap` | `5p7EkSfB...` |

---

## New ENUM Values Required

The following action types are not yet in the `party.action_type` ENUM:

- `withdraw`

Run the ALTER TABLE statement in the generated `sp_party_merge-*.sql` file first.

---

## Suggested sp_party_merge Updates

Based on the patterns above, the following detection logic can be added:

```sql
-- Add these conditions to the action type CASE statement:

-- Instruction 'WithdrawWithheldTokensFromAccounts' appears 3 times [NEW ENUM VALUE]
WHEN v_log_messages LIKE '%Instruction: WithdrawWithheldTokensFromAccounts%' THEN 'withdraw'

-- Instruction 'WithdrawWithheldTokensFromMint' appears 3 times [NEW ENUM VALUE]
WHEN v_log_messages LIKE '%Instruction: WithdrawWithheldTokensFromMint%' THEN 'withdraw'

-- Instruction 'Swap2' appears 1 times
WHEN v_log_messages LIKE '%Instruction: Swap2%' THEN 'swap'
```

---

## Instructions Needing Manual Review

These instructions could not be automatically mapped:

### `GetAccountDataSize`

- **Count:** 4
- **Sample signatures:**
  - `5fhbMQJsaCEMBWjpVoUmNpbrhr7LSoK4uED8Qh9ZbeGEY8wt2RGNgKortMURnvsCr9fHTYdWxbMGM5azDHX4hwwC`
  - `5nZu2vdyqJDmdCsVHtRksvoykmbwfhREuXm5pQvfYCoQnTchyMDtGnZW29qAxhitNjiNNkmJpKFA5FfPpZoqnME5`
  - `BpZp78e5Z2PqW8ocDGrmpPyxQooZUj9rHA9oZtU1ZvKCLMZnw8NfzV5ZmYaxsLF2jTM9x4PHj9r9zwgqYmnnsyu`

### `WrapSol`

- **Count:** 3
- **Sample signatures:**
  - `51531obV9eKiei11Ar66vDUSM7W9Wmd2jrgQJMx4dF5ZDYTLXsdVk3zUp4ppt6FsheeF7XaLjVPeekxSSAmu1x8r`
  - `5DSxc1LCPZnt2kBuDSwxebF6LHtPQq74iWJ8t7y2rqwRkFyj1KTzQHFnCxR8rg4FtdrvEKyCJBMzbPquMUr57BY9`
  - `5nm4XHUsKKW3g9fK14tqvMsaymW8DATPHN4nBYgjoNV9btGwGZfYqySiGWiKLv9ySRRW2sER5Yo2fnHbEV9dWv2J`

---

## Next Steps

1. Review the generated `sp_party_merge-*.sql` file
2. Apply the stored procedure update if the changes look correct
3. Reprocess unknown records:

```sql
CALL sp_party_reprocess_unknown(1000);
```

