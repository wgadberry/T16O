# Winston Worker Assessment Report

**Generated:** 2025-12-06 03:13:46 UTC

---

## Summary

| Metric | Value |
|--------|-------|
| Unknown party records | 24,659 |
| Unknown transactions | 20 |
| Unknown percentage | 4.11% |

---

## Program Pattern Analysis

These program IDs appear in unknown transactions. Consider adding detection logic to `sp_party_merge`.

| Program ID | Count | Sample Signatures |
|------------|-------|-------------------|
| `MEViEnscUm6tsQRoGd9h6nLQaQspKj7DB2M5FwM3Xvz` | 5 | `3KTx6PFM...`, `3YS4osZX...` |
| `pAMMBay6oceH9fJKBRHGP5D4bD4sWpmSwMn52FMfXEA` | 3 | `2g7ETgrV...`, `4UoD3VfX...` |
| `MKBzFXzU22MFQqMDfad1EmkYuRedeRtKmkgnuBgrtBp` | 1 | `4r5tGRbv...` |

---

## Instruction Pattern Analysis

These instruction types appear in unknown transactions.

| Instruction | Count | Suggested Action | Sample Signatures |
|-------------|-------|------------------|-------------------|
| `WithdrawWithheldTokensFromMint` | 9 | `withdraw` | `2623XKhr...`, `3vwEFxfG...` |
| `Sell` | 4 | `swap` | `2g7ETgrV...`, `4r5tGRbv...` |
| `GetAccountDataSize` | 1 | *(needs review)* | `49HGZCMV...` |
| `WithdrawWithheldTokensFromAccounts` | 1 | `withdraw` | `5HCxRT4g...` |

---

## New ENUM Values Required

The following action types are not yet in the `party.action_type` ENUM:

- `withdraw`

Run the ALTER TABLE statement in the generated `sp_party_merge-*.sql` file first.

---

## Suggested sp_party_merge Updates

Based on the patterns above, the following detection logic can be added:

```sql
-- Add these conditions to the action type CASE statement:

-- Instruction 'WithdrawWithheldTokensFromMint' appears 9 times [NEW ENUM VALUE]
WHEN v_log_messages LIKE '%Instruction: WithdrawWithheldTokensFromMint%' THEN 'withdraw'

-- Instruction 'Sell' appears 4 times
WHEN v_log_messages LIKE '%Instruction: Sell%' THEN 'swap'

-- Instruction 'WithdrawWithheldTokensFromAccounts' appears 1 times [NEW ENUM VALUE]
WHEN v_log_messages LIKE '%Instruction: WithdrawWithheldTokensFromAccounts%' THEN 'withdraw'
```

---

## Instructions Needing Manual Review

These instructions could not be automatically mapped:

### `GetAccountDataSize`

- **Count:** 1
- **Sample signatures:**
  - `49HGZCMV2ZWzgypGn9AwrFKRDmdYVDiHV35WyQ19m7LnoVqdhJncvD2Ws3Dvg6emSbFQgxXApgLqEpiL7SoFaaZT`

---

## Next Steps

1. Review the generated `sp_party_merge-*.sql` file
2. Apply the stored procedure update if the changes look correct
3. Reprocess unknown records:

```sql
CALL sp_party_reprocess_unknown(1000);
```

