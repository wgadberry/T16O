# Winston Worker Assessment Report

**Generated:** 2025-12-10 09:27:13 UTC

---

## Summary

| Metric | Value |
|--------|-------|
| Unknown party records | 2,824 |
| Unknown transactions | 24 |
| Unknown percentage | 20.92% |

---

## Program Pattern Analysis

These program IDs appear in unknown transactions. Consider adding detection logic to `sp_party_merge`.

| Program ID | Count | Sample Signatures |
|------------|-------|-------------------|
| `DF1ow4tspfHX9JwWJsAb9epbkA8hmpSEAtxXy1V27QBH` | 8 | `5p7EkSfB...`, `8PJzUTHh...` |
| `3q9RnxufDcorEPAmCeZumn8kveC832rYYmZSk5tcaCzM` | 3 | `3LTgYgp3...`, `3WwfZGGn...` |
| `JUP6LkbZbjS1jKKwapdHNy74zcZ3tLUZoi5QNyVTaV4` | 2 | `38JDpYU1...`, `58npgT7a...` |
| `cpamdpZCGKUy5JxQXB4dcpGPiikHawvSWAd6mEn1sGG` | 2 | `3GCYwPpx...`, `4xvn6UAy...` |
| `DeJBGdMFa1uynnnKiwrVioatTuHmNLpyFKnmB5kaFdzQ` | 1 | `4HeRTbEk...` |

---

## Instruction Pattern Analysis

These instruction types appear in unknown transactions.

| Instruction | Count | Suggested Action | Sample Signatures |
|-------------|-------|------------------|-------------------|
| `Swap2` | 4 | `swap` | `5p7EkSfB...`, `b3VZA1Pz...` |
| `WithdrawWithheldTokensFromAccounts` | 4 | `withdraw` | `3vBMbSkP...`, `4R1Q4kcp...` |
| `WithdrawWithheldTokensFromMint` | 4 | `withdraw` | `5hzv82ak...`, `NoLnJhod...` |
| `WrapSol` | 4 | *(needs review)* | `8PJzUTHh...`, `da4WKDHC...` |
| `ExecuteLightweightThreeHop` | 3 | *(needs review)* | `3LTgYgp3...`, `3WwfZGGn...` |
| `GetAccountDataSize` | 3 | *(needs review)* | `38JDpYU1...`, `4HeRTbEk...` |
| `InitializePool` | 2 | `createAccount` | `3GCYwPpx...`, `4xvn6UAy...` |

---

## New ENUM Values Required

The following action types are not yet in the `party.action_type` ENUM:

- `withdraw`

Run the ALTER TABLE statement in the generated `sp_party_merge-*.sql` file first.

---

## Suggested sp_party_merge Updates

Based on the patterns above, the following detection logic can be added:

```sql
-- Add these conditions to the action type CASE statement:

-- Instruction 'Swap2' appears 4 times
WHEN v_log_messages LIKE '%Instruction: Swap2%' THEN 'swap'

-- Instruction 'WithdrawWithheldTokensFromAccounts' appears 4 times [NEW ENUM VALUE]
WHEN v_log_messages LIKE '%Instruction: WithdrawWithheldTokensFromAccounts%' THEN 'withdraw'

-- Instruction 'WithdrawWithheldTokensFromMint' appears 4 times [NEW ENUM VALUE]
WHEN v_log_messages LIKE '%Instruction: WithdrawWithheldTokensFromMint%' THEN 'withdraw'

-- Instruction 'InitializePool' appears 2 times
WHEN v_log_messages LIKE '%Instruction: InitializePool%' THEN 'createAccount'
```

---

## Instructions Needing Manual Review

These instructions could not be automatically mapped:

### `WrapSol`

- **Count:** 4
- **Sample signatures:**
  - `8PJzUTHhEBAWdima7mhb6RaeW7tA8u9Am1jzFad3MMFShCaZPbh7PKWGeQczDR8ihDTJ3nC9RmFkZxjgK7Z4HM7`
  - `da4WKDHCKF2e6QouKSJH4djdcrM2hofmhcqHBxfCLd8NKFSTKj7mNhdX16W66JavLnV6Mjt4exNQNdnNfAk8rtk`
  - `j7VhzQ3SHh3HSfh5WwvyCBuGfuuyY5F8bchvDrBvFPPgrXuspEi4PdWfh6m5LsQPaZ1wCws4kcDGcToGRwwDXUv`

### `ExecuteLightweightThreeHop`

- **Count:** 3
- **Sample signatures:**
  - `3LTgYgp3YauoLyPsPwrPjMvGkZoGFvj5i3UZZbcKKZpGqf3cs686KuKYB99bNCazYHt7tPW5uoKvgkjCwVtWmt2R`
  - `3WwfZGGn8c6yG8o2tUZYLjuY8y9nT7o11X4N3MXoyrTmAdLVF1WkPsijnm1vAPyyRDpH9TLGtXbPojCvkqATLUoQ`
  - `5FwwnveXQN5htt35e39R8tPbaRBdjryh5CLy5T6he8mr3nonYYpqE26Zt4mqoUpFY1VhPPsyf6jgQmS1QKcZo6rg`

### `GetAccountDataSize`

- **Count:** 3
- **Sample signatures:**
  - `38JDpYU1SqdatUhdjQEuyrV64AZ8T8FCLzx7TgzxZkYv6q7RtHyN8BUKEA1ymHYYWGfrTbanPH1brm4qgX2hQX5p`
  - `4HeRTbEkgFiRhBSockKhKAviANttzkGyayLtyFbB5mbkWJNzXptuqNPMfuYLaQhpSvoxUpBuFgiEA5gB8eNXUFcm`
  - `58npgT7aTUqEb7Hv4HDobwfT919gSJtkXFRkEHjBQWK4tz6M4vwvC2aFa5hV1daDJgpACmNMn47rRgUnKoZDL8kR`

---

## Next Steps

1. Review the generated `sp_party_merge-*.sql` file
2. Apply the stored procedure update if the changes look correct
3. Reprocess unknown records:

```sql
CALL sp_party_reprocess_unknown(1000);
```

