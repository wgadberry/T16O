# Winston Worker Assessment Report

**Generated:** 2025-12-10 09:32:13 UTC

---

## Summary

| Metric | Value |
|--------|-------|
| Unknown party records | 3,608 |
| Unknown transactions | 27 |
| Unknown percentage | 19.84% |

---

## Program Pattern Analysis

These program IDs appear in unknown transactions. Consider adding detection logic to `sp_party_merge`.

| Program ID | Count | Sample Signatures |
|------------|-------|-------------------|
| `DF1ow4tspfHX9JwWJsAb9epbkA8hmpSEAtxXy1V27QBH` | 8 | `2fNwsj5W...`, `3RhPhsCU...` |
| `3q9RnxufDcorEPAmCeZumn8kveC832rYYmZSk5tcaCzM` | 5 | `4z7bMf85...`, `e9opqhes...` |
| `JUP6LkbZbjS1jKKwapdHNy74zcZ3tLUZoi5QNyVTaV4` | 3 | `22ANS9Mp...`, `4Ku8zJTx...` |
| `EQU1KC1g3wDBX82XaLy54GJfBUGhvoo5Mu7A6q4Xcq68` | 2 | `UTbHzAyw...`, `VEsqQSAv...` |
| `sattCHvHkM4XHLyadnU4KQtuNWZbWVDKzuPhmJBXCkq` | 1 | `4QLb9W3z...` |

---

## Instruction Pattern Analysis

These instruction types appear in unknown transactions.

| Instruction | Count | Suggested Action | Sample Signatures |
|-------------|-------|------------------|-------------------|
| `ExecuteLightweightThreeHop` | 5 | *(needs review)* | `4z7bMf85...`, `e9opqhes...` |
| `WithdrawWithheldTokensFromMint` | 5 | `withdraw` | `9Pk2eKMk...`, `NzSpXqQm...` |
| `Swap2` | 4 | `swap` | `2fNwsj5W...`, `5p7EkSfB...` |
| `WrapSol` | 4 | *(needs review)* | `3RhPhsCU...`, `44YWtkXH...` |
| `WithdrawWithheldTokensFromAccounts` | 3 | `withdraw` | `1XzdhhCM...`, `26gRgyfU...` |
| `GetAccountDataSize` | 2 | *(needs review)* | `4Ku8zJTx...`, `6xz8mPZu...` |
| `SwapBaseInput` | 2 | `swap` | `UTbHzAyw...`, `VEsqQSAv...` |
| `CreateTokenAccount` | 1 | `createAccount` | `22ANS9Mp...` |
| `Swap` | 1 | `swap` | `4QLb9W3z...` |

---

## New ENUM Values Required

The following action types are not yet in the `party.action_type` ENUM:

- `withdraw`

Run the ALTER TABLE statement in the generated `sp_party_merge-*.sql` file first.

---

## Suggested sp_party_merge Updates

Based on the patterns above, the following detection logic can be added:

```sql
-- Add these conditions to the action type CASE statement:

-- Instruction 'WithdrawWithheldTokensFromMint' appears 5 times [NEW ENUM VALUE]
WHEN v_log_messages LIKE '%Instruction: WithdrawWithheldTokensFromMint%' THEN 'withdraw'

-- Instruction 'Swap2' appears 4 times
WHEN v_log_messages LIKE '%Instruction: Swap2%' THEN 'swap'

-- Instruction 'WithdrawWithheldTokensFromAccounts' appears 3 times [NEW ENUM VALUE]
WHEN v_log_messages LIKE '%Instruction: WithdrawWithheldTokensFromAccounts%' THEN 'withdraw'

-- Instruction 'SwapBaseInput' appears 2 times
WHEN v_log_messages LIKE '%Instruction: SwapBaseInput%' THEN 'swap'

-- Instruction 'CreateTokenAccount' appears 1 times
WHEN v_log_messages LIKE '%Instruction: CreateTokenAccount%' THEN 'createAccount'

-- Instruction 'Swap' appears 1 times
WHEN v_log_messages LIKE '%Instruction: Swap%' THEN 'swap'
```

---

## Instructions Needing Manual Review

These instructions could not be automatically mapped:

### `ExecuteLightweightThreeHop`

- **Count:** 5
- **Sample signatures:**
  - `4z7bMf85vSiN23jd6xaFESBKyTK8U3sx75krjeSBVNeoZnmYhiQjLzEL5pubAtg5fdSkmng7WChFHJtGMyFjhyjB`
  - `e9opqhesSp8UV9UCExSCeFBmD1h61tzsJhU5M3o4wKqkvcz6f2xVZGR9NFN7VEZ17GYxPDmGv9i5PS1ZBZL3NTv`
  - `ysNJK7AyaZf6VwmGBHhdNCNa8onKmZasTJCBgdgbDDWMZhCNMaLqoKsXMtfGWvVuZhd4bW1x6SiXNKiQg8wFPHS`

### `WrapSol`

- **Count:** 4
- **Sample signatures:**
  - `3RhPhsCUMGcAJHus3f2XLvQaUKgQA3Jz2WQSX7amQuZFpRUYmmFMLeRrkjhekpFtMRFmhNBg3NXtTR8oAhRM29r`
  - `44YWtkXHPN7cKvmXSU3qfVhEuhpVuwcFed1DjmmB8BNSyaEguBSsqyiRP6b5JX2UfE6SrMbwf4TANzgCft3ACvrq`
  - `4eZsmCzF9K4L8ww4rRhP3gr1oGcCdjNnW2mXehe1xpLpgNLBSRzsrojSji8fJ4q6xpdtg1RetR3KJyGYgiBcfFkp`

### `GetAccountDataSize`

- **Count:** 2
- **Sample signatures:**
  - `4Ku8zJTxie82EZYvEFuUhJb7esg25qqQxCdVHsUosnjfwxnPbf8gvk4pMmkGmYUkLEH65riTVA8LYiHM51mgpAio`
  - `6xz8mPZuEKNrX9QCRHFXqJKJbXvEMd68t8LzkMmuezjGAGnrTUVNXmZuRVrWDKJhBUcTScPEVRGqCuMryxLhySk`

---

## Next Steps

1. Review the generated `sp_party_merge-*.sql` file
2. Apply the stored procedure update if the changes look correct
3. Reprocess unknown records:

```sql
CALL sp_party_reprocess_unknown(1000);
```

