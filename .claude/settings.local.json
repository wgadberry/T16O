{
  "permissions": {
    "allow": [
      "Bash(1 <<'ENDSQL'\nDELETE FROM party WHERE tx_id = 18493;\nCALL sp_party_merge('5tv8GmprXYWVWrGJAapp91hk2zLsKGYws1VUkM9gpZm2EhzyFLNAypjxUh27QN8Nq9QKQgMBkWM6WUsFqqDpfBwB');\nSELECT COUNT(*) as party_count FROM party WHERE tx_id = 18493;\nSELECT id, owner_id, mint_id, amount_change, party_type, counterparty_id FROM party WHERE tx_id = 18493;\nENDSQL)",
      "Bash(1 <<'ENDSQL'\nDELETE FROM party WHERE tx_id = 18493;\nCALL sp_party_merge('5tv8GmprXYWVWrGJAapp91hk2zLsKGYws1VUkM9gpZm2EhzyFLNAypjxUh27QN8Nq9QKQgMBkWM6WUsFqqDpfBwB');\nSELECT COUNT(*) as party_count FROM party WHERE tx_id = 18493;\nSELECT id, owner_id, mint_id, amount_change, party_type, counterparty_id, balance_type FROM party WHERE tx_id = 18493;\nENDSQL)",
      "Bash(git -C \"C:\\Users\\wgadb\\source\\repos\\T16O\" diff sql/sp_party_merge.sql)",
      "Bash(git -C \"C:\\Users\\wgadb\\source\\repos\\T16O\" add sql/sp_party_merge.sql sql/party.sql sql/fn_signature_exists.sql)",
      "Bash(git -C \"C:\\Users\\wgadb\\source\\repos\\T16O\" commit -m \"$(cat <<''EOF''\nFix sp_party_merge to resolve token accounts from loadedAddresses\n\n- Add support for v0 transactions with address lookup tables\n- Resolve token accounts from account_keys, loadedAddresses.writable,\n  or loadedAddresses.readonly based on accountIndex\n- Add retry loop with deadlock/duplicate key handling\n- Pre-populate addresses table before inserting party records\n- Use CTEs instead of temp tables for MySQL compatibility\n- Add counterparty linking via party_type and counterparty_id columns\n- Add fn_signature_exists function for checking object existence\n- Update party table schema with account_index, party_type, balance_type\n\n Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git -C \"C:\\Users\\wgadb\\source\\repos\\T16O\" add sql/party.sql sql/sp_party_merge.sql)",
      "Bash(git -C \"C:\\Users\\wgadb\\source\\repos\\T16O\" commit -m \"$(cat <<''EOF''\nAdd action_type detection to party table\n\n- Add action_type ENUM column with 14 types: fee, rent, transfer,\n  transferChecked, burn, mint, swap, createAccount, closeAccount,\n  stake, unstake, reward, airdrop, unknown\n- Update sp_party_merge to detect action types from log_messages:\n  - fee: SOL decrease on account_index 0 with no counterparty\n  - burn/mint: Token changes with Burn/MintTo instructions\n  - swap: DEX operations (Jupiter, Raydium, Orca, Meteora)\n  - transfer/transferChecked: Token transfers with counterparty\n  - createAccount: SOL decrease with InitializeAccount\n  - closeAccount: SOL increase with CloseAccount\n  - stake/unstake: Stake program operations\n- Add idx_action_type index for efficient filtering\n\n Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(python -m json.tool:*)",
      "Bash(git -C \"C:\\Users\\wgadb\\source\\repos\\T16O\" add -A)",
      "Bash(git -C \"C:\\Users\\wgadb\\source\\repos\\T16O\" commit -m \"$(cat <<''EOF''\nAdd batch processing to RabbitMQ workers and JSON output for sp_address_activity\n\n- RabbitMqTransactionFetchWorker: Add batch collection with sequential RPC processing\n  - Collects messages before processing to control RPC pacing\n  - Configurable batchSize (default 50) and batchWaitMs (default 100)\n- RabbitMqTransactionDbWorker: Update prefetch to 50 for better throughput\n- sp_address_activity: Rewrite to output single JSON document for analysts\n  - Include address info, summary totals, activity by type with signatures\n  - Token summary, recent transactions, counterparties, programs used\n  - Each activity includes signature, timestamp, action, token, amount, counterparty\n- sp_party_merge: Remove rows_affected output\n- AssetFetcher: Add EnableSlowFallbacks option, cache existence methods\n- Add reset_for_testing.sql for wiping test data while preserving mints/programs\n\n Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(/dev/null <<'ENDSQL'\nSELECT COUNT(*) as party_count FROM party;\nENDSQL)",
      "Bash(git -C \"C:\\Users\\wgadb\\source\\repos\\T16O\" add sql/fn_signature_exists.sql)",
      "Bash(git -C \"C:\\Users\\wgadb\\source\\repos\\T16O\" diff --cached sql/fn_signature_exists.sql)",
      "Bash(git -C \"C:\\Users\\wgadb\\source\\repos\\T16O\" commit -m \"$(cat <<''EOF''\nFix fn_signature_exists to use party table instead of transaction_party\n\nThe ''participant'' object type was referencing non-existent transaction_party\ntable, causing \"Table 't16o_db.tp' doesn 't exist\" errors in PartyWriteWorker.\n\n Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git -C \"C:\\Users\\wgadb\\source\\repos\\T16O\" add sql/sp_tx_merge.sql)",
      "Bash(git -C \"C:\\Users\\wgadb\\source\\repos\\T16O\" commit -m \"$(cat <<''EOF''\nFix race condition in sp_tx_merge address insertion\n\nUse INSERT IGNORE instead of check-then-insert pattern to handle\nconcurrent workers trying to insert the same fee payer address.\n\n Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git -C \"C:\\Users\\wgadb\\source\\repos\\T16O\" add sql/t16o_db_build.sql)",
      "Bash(git -C \"C:\\Users\\wgadb\\source\\repos\\T16O\" diff --cached --stat sql/t16o_db_build.sql)",
      "Bash(git -C \"C:\\Users\\wgadb\\source\\repos\\T16O\" commit -m \"$(cat <<''EOF''\nAdd comprehensive t16o_db database build script\n\nComplete MySQL build script extracted from live database containing:\n- Database creation with proper character set (utf8mb4)\n- All 4 tables: addresses, config, transactions, party\n- All 3 functions: fn_reconstruct_transaction, fn_tx_get, fn_signature_exists\n- All 10 stored procedures for transaction processing and analysis\n- Seed data for well-known Solana programs (Jupiter, Orca, Raydium, etc.)\n- Seed data for major token mints (USDC, USDT, SOL, JitoSOL, etc.)\n- Default configuration values\n\nThis single script can rebuild the entire t16o_db from scratch.\n\n Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git -C \"C:\\Users\\wgadb\\source\\repos\\T16O\" diff src/T16O.Services/RabbitMQ/Workers/)",
      "Bash(git -C \"C:\\Users\\wgadb\\source\\repos\\T16O\" diff --cached --stat)"
    ],
    "deny": [],
    "ask": []
  }
}
